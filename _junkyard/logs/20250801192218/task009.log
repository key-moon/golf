Here is a self‐contained “grid‐fill” solution.  We first detect the “frame” rows/columns (which are the uniform lines of the separator colour), slice the interior into a small R×C array of 2×2 blocks, then for each nonzero colour we project it horizontally and vertically between its two endpoints, and finally write the blocks back into the big grid:

```python
def p(g):
    H,W=len(g),len(g[0])
    # find frame (separator) rows: those rows entirely one colour
    FR=[i for i,row in enumerate(g) if row.count(row[0])==W]
    # the separator colour
    f=g[FR[0]][0]
    # find the separator columns by looking at one frame‐row
    FC=[j for j in range(W) if g[FR[0]][j]==f]
    R,C=len(FR)-1,len(FC)-1
    # build small block‐grid B of size R×C, sampling top‐left of each 2×2 cell
    B=[[g[FR[i]+1][FC[j]+1] for j in range(C)] for i in range(R)]
    # for each real colour x≠0 fill in straight lines between any two x's
    for x in {c for row in B for c in row} - {0}:
        # horizontal fills
        for i in range(R):
            js=[j for j in range(C) if B[i][j]==x]
            if len(js)>1:
                a,b=min(js),max(js)
                for j in range(a+1,b):
                    B[i][j]=x
        # vertical fills
        for j in range(C):
            is_=[i for i in range(R) if B[i][j]==x]
            if len(is_)>1:
                a,b=min(is_),max(is_)
                for i in range(a+1,b):
                    B[i][j]=x
    # write B back into the original grid
    for i in range(R):
        for j in range(C):
            x=B[i][j]
            if x:
                for r in range(FR[i]+1,FR[i+1]):
                    for c in range(FC[j]+1,FC[j+1]):
                        g[r][c]=x
    return g
```

Explanation of the main steps:

1.  **Locate the frame separators**  
    We scan for rows made of a single repeated colour—those are the horizontal grid lines.  Likewise we scan that row to find columns of the same colour for vertical grid lines.

2.  **Extract the small block grid**  
    Between each pair of horizontal lines lies a 2‐row “cell,” and between each pair of vertical lines a 2‐column “cell.”  We sample the top‐left corner of each cell to build a small R×C matrix `B`.

3.  **Line‐fill each colour**  
    For each nonzero colour `x` appearing in `B` we look in each row (resp. column) for two occurrences of `x` and fill all cells between them with `x`.

4.  **Scatter back into `g`**  
    Finally we overwrite each 2×2 cell in the original grid with the (possibly updated) colour from `B`.

This exactly reproduces the row‐ and column‐“draw” behaviour shown in your examples.