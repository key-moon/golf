```python
def p(g):
    for y in range(2, len(g) - 2):
        for x in range(2, len(g) - 2):
            c = g[y][x]
            if c and g[y-1][x] == g[y+1][x] == g[y][x-1] == g[y][x+1] != c:
                a = g[y-1][x]
                for u in 1, 2, -1, -2:
                    g[y+u][x]    = a
                    g[y][x+u]    = a
                    g[y+u][x+u]  = c
                    g[y+u][x-u]  = c
    return g
```