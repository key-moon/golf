```python
def p(g):
    # find the most frequent nonzero color
    cnt={}
    for r in g:
        for v in r:
            if v:
                cnt[v]=cnt.get(v,0)+1
    m=max(cnt,key=cnt.get)
    # find all connected components of color m
    R,C=len(g),len(g[0])
    seen=set()
    comps=[]
    for i in range(R):
        for j in range(C):
            if g[i][j]==m and (i,j) not in seen:
                q=[(i,j)]
                seen.add((i,j))
                comp=[]
                for x,y in q:
                    comp.append((x,y))
                    for dx,dy in((1,0),(-1,0),(0,1),(0,-1)):
                        nx,ny=x+dx,y+dy
                        if 0<=nx<R and 0<=ny<C and g[nx][ny]==m and (nx,ny) not in seen:
                            seen.add((nx,ny))
                            q.append((nx,ny))
                comps.append(comp)
    # pick largest component
    comp=max(comps,key=len)
    rs=[x for x,_ in comp]; cs=[y for _,y in comp]
    r0,r1,min(rs),max(rs); c0,c1=min(cs),max(cs)
    H=r1-r0+1; W=c1-c0+1
    # fill with m
    out=[[m]*W for _ in range(H)]
    # overlay other colors
    for i in range(R):
        for j in range(C):
            v=g[i][j]
            if v and v!=m and r0<=i<=r1 and c0<=j<=c1:
                out[i-r0][j-c0]=v
    return out
```