```python
def p(g):
 n=len(g);c=[]
 for i in range(n):
  for j in range(n):
   if g[i][j]==8:
    v=[(i,j)];g[i][j]=0
    for a,b in v:
     for u,t in((a+1,b),(a-1,b),(a,b+1),(a,b-1)):
      if 0<=u<n and 0<=t<n and g[u][t]==8:
       g[u][t]=0;v.append((u,t))
    c.append(v)
 m=min(map(len,c))
 for v in c:
  for a,b in v:g[a][b]=1+(len(v)==m)
 return g
```