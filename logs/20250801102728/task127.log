```python
def p(g):
 n,m=len(g),len(g[0])
 h=[i for i in range(n)if g[i]==[5]*m]
 y=(h and[0]+h+[n])or[0,n]
 w=[j for j in range(m)if all(g[i][j]==5for i in range(n))]
 x=[0]+w+[m]
 for p in range(len(y)-1):
  for q in range(len(x)-1):
   i0=y[p]+(p>0);i1=y[p+1];j0=x[q]+(q>0);j1=x[q+1]
   v=g[i0+(i1-i0)//2][j0+(j1-j0)//2]+5
   for i in range(i0,i1):
    for j in range(j0,j1):g[i][j]=v
 return g
```