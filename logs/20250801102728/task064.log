```python
def p(g):
 d={}
 for i,r in enumerate(g):
  for j,v in enumerate(r):
   a=d.get(v)
   if a:a[0]+=1;a[1]=min(a[1],i);a[2]=max(a[2],i);a[3]=min(a[3],j);a[4]=max(a[4],j)
   else:d[v]=[1,i,i,j,j]
 b=s=0
 for v,(n,y0,y1,x0,x1) in d.items():
  a=(y1-y0+1)*(x1-x0+1)
  if n==a>1 and a>s:s=a; b=v
 if s:
  y0,y1,x0,x1=d[b][1:]
  for i,r in enumerate(g):
   for j,v in enumerate(r):
    if v!=b:
     if y0<=i<=y1:
      if j<x0:
       for k in range(j+1,x0):r[k]=v
      elif j>x1:
       for k in range(x1+1,j):r[k]=v
     if x0<=j<=x1:
      if i<y0:
       for k in range(i+1,y0):g[k][j]=v
      elif i>y1:
       for k in range(y1+1,i):g[k][j]=v
 return g
```