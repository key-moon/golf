Here is a single‐expression, code‐golfed solution.  It

1. Finds the background colour as `g[0][0]`,
2. Divides the 27×27 grid into a 3×3 array of 9×9 blocks,
3. In each block, picks the first non‐background cell (or 0 if none),
4. Emits that 3×3 array.

```python
def p(g):
 val_bg=g[0][0];val_b=len(g)//3
 return[[next((g[val_y][val_x]for val_y in range(val_i*val_b,(val_i+1)*val_b)
                         for val_x in range(val_j*val_b,(val_j+1)*val_b)
                         if g[val_y][val_x]!=val_bg),0)
         for val_j in range(3)]
        for val_i in range(3)]
```

This passes all the given examples.