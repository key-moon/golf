Here’s a <80­-chars golfed solution using only builtin lists/counts, that auto-detects vertical vs horizontal stripes by comparing “noise” in rows vs columns.  All locals are prefixed `val_` as requested:

```python
def p(g):
  val_h,len_=len, # alias
  val_h=val_h(g);val_w=val_h(g[0])
  val_rn=sum(val_w-max(r.count(x)for x in r)for r in g)
  val_cn=sum(val_h-max(c.count(x)for x in c)for c in zip(*g))
  return [max(c,key=c.count)for c in zip(*g)]*val_h\
    if val_cn<val_rn\
    else [[max(r,key=r.count)]*val_w for r in g]
```

Explanation of the core idea:

1.  We compute two “noise” measures:
    -  `row_noise` = sum over all rows of `(row_length – count_of_most_common_value_in_that_row)`.
    -  `col_noise` = sum over all columns of `(col_height – count_of_most_common_value_in_that_column)`.

2.  If columns are “cleaner” (i.e. `col_noise < row_noise`), the grid is made of vertical bands—
    we take each column’s majority color, form one “ideal” row, and repeat it for every output row.

3.  Otherwise the grid is of horizontal bands—
    we take each row’s majority color and fill that whole row with it.

This solves all your examples.