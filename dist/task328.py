A=range
def p(g):B=A(n:=len(g));return[[((u:=sorted(((C:=(i,n+~i)[k//2])+(D:=(j,n+~j)[k%2]),~max(C,D)%2*v)for k in A(4)if(v:=g[-(1<k)][k%-2])))[0][0]<u[1][0])*u[0][1]for j in B]for i in B]