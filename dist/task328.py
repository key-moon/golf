def p(g):A=range(n:=len(g));return[[(u:=sorted((x%n+y%n,~max(x%n,y%n)%2*v)for y in(i,~i)for x in(j,~j)if(v:=g[y//n][x//n])))[0][1]*(u[0][0]<u[1][0])for j in A]for i in A]