p=lambda g,c=-5,R=range(19):c*g or p([[g[j][18-i]|g[I:=min(i,18-i)][min(min(j,18-j),I+1+j%2)]for j in R]for i in R],c+1)