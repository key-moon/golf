def p(g):b=len(g[0]);t=sum(g,[]);S=range(len(t));f=lambda n:t[n:n+1]!=[0]or(t.__setitem__(n,3),[f(n+k)for k in(-1,1,-b,b)]);[*map(f,[*S[:b],*S[-b:],*S[::b],*S[b-1::b]])];return[[x or 2for x in t[i:i+b]]for i in S[::b]]