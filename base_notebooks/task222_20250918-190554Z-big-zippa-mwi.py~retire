E=enumerate
def p(g):g=[[B if(C and g[C-1][A]==B)+(C+1<len(g)and g[C+1][A]==B)+(A and D[A-1]==B)+(A+1<len(g)and D[A+1]==B)>1 else 0 for(A,B)in E(D)]for(C,D)in E(g)];B=sum(g,[]);C=sorted([[B.count(A),A]for A in set(B)if A>0]);g=[[0 if A!=C[-1][1]else A for A in A]for A in g];return g