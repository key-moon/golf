def p(j,A=range,c=len):
	I=[A[:]for A in j];D,J=c(j),c(j[0]);K=j[0][2]
	for B in A(D):
		for C in A(J):
			if j[B][C]==K:I[B][C]=K;j[B][C]=0
			else:I[B][C]=0
	E=[A[:]for A in j]
	for L in A(D):
		F=[(B,C)for B in A(D)for C in A(J)if j[B][C]==L]
		for B in A(len(F)):
			for C in A(B+1,len(F)):
				G,H=F[B];M,N=F[C]
				if G==M:
					for O in A(min(H,N),max(H,N)+1):E[G][O]=L
				elif H==N:
					for P in A(min(G,M),max(G,M)+1):E[P][H]=L
	for B in A(D):
		for C in A(J):
			if I[B][C]>0:E[B][C]=K
	return E