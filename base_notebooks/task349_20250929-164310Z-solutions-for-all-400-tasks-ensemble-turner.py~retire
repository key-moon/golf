def p(I,g=range):
 A=[A[:]for A in I];D,D=len(A),len(A[0]);from collections import Counter as a,deque;T=a(sum(A,[])).most_common()[0][0];o=[[0]*D for A in g(D)];U=[]
 for E in g(D):
  for C in g(D):
   if o[E][C]:continue
   o[E][C]=1;J=A[E][C]
   if J==T:continue
   e=deque([(E,C)]);F=[(E,C)]
   while e:
    K,L=e.popleft()
    for t in(-1,0,1):
     for W in(-1,0,1):
      if t==0and W==0:continue
      G,H=K+t,L+W
      if 0<=G<D and 0<=H<D and not o[G][H]and A[G][H]==J:o[G][H]=1;e.append((G,H));F.append((G,H))
   U.append((J,F))
 for E in g(D):
  for C in g(D):
   if A[E][C]==9:
    for X in g(E,D):
     if A[X][C]==T:A[X][C]=1
 for(J,F)in U:
  if J!=9or not F:continue
  b=min(A for(A,D)in F);c=max(A for(A,D)in F);Y=min(A for(D,A)in F);Z=max(A for(D,A)in F);i=(Z-Y+1)//2
  for N in g(1,i+1):
   O,P,Q,R=b-N,c+N,Y-N,Z+N
   if 0<=O<D:
    for L in g(max(0,Q),min(D,R+1)):A[O][L]=3
   if 0<=P<D:
    for L in g(max(0,Q),min(D,R+1)):A[P][L]=3
   if 0<=Q<D:
    for K in g(max(0,O),min(D,P+1)):A[K][Q]=3
   if 0<=R<D:
    for K in g(max(0,O),min(D,P+1)):A[K][R]=3
 return A
