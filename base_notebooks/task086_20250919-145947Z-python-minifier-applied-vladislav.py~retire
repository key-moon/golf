from typing import Tuple,List
def solve_3befdf3e(I):
	"Compact, non-DSL solver for task 086.\n\n    For each two-color non-zero component with an inner B rectangle inside\n    an A border:\n      1) Expand the A border outward by the inner rectangle's size.\n      2) Draw a 1-thick B ring around the inner rectangle.\n      3) Convert the inner rectangle to A.\n    ";M,N=len(I),len(I[0]);C=[list(A)for A in I];Q=[[False]*N for A in range(M)]
	def m(sr,sc):
		D=[(sr,sc)];Q[sr][sc]=True;G=[];H=set()
		while D:
			E,F=D.pop();G.append((E,F));H.add(C[E][F])
			for(I,J)in((1,0),(-1,0),(0,1),(0,-1)):
				A,B=E+I,F+J
				if 0<=A<M and 0<=B<N and not Q[A][B]and C[A][B]!=0:Q[A][B]=True;D.append((A,B))
		return G,H
	F=[A[:]for A in C]
	for V in range(M):
		for W in range(N):
			if C[V][W]!=0 and not Q[V][W]:
				E,b=m(V,W)
				if len(b)!=2:continue
				c=[A for(A,B)in E];d=[A for(B,A)in E];H,J=min(c),max(c);K,L=min(d),max(d);X=[]
				for(A,B)in E:
					if A in(H,J)or B in(K,L):X.append(C[A][B])
				if X:from collections import Counter as n;D=n(X).most_common(1)[0][0]
				else:e=[C[A][B]for(A,B)in E];D=max(set(e),key=e.count)
				f,=tuple(b-{D});Y=[(A,B)for(A,B)in E if C[A][B]==f]
				if not Y:continue
				g=[A for(A,B)in Y];h=[A for(B,A)in Y];R,S=min(g),max(g);T,U=min(h),max(h);Z=S-R+1;a=U-T+1
				if Z not in(1,2)or a not in(1,2):continue
				o=[A for A in range(K,L+1)if(H,A)in E and C[H][A]==D]
				for G in range(1,Z+1):
					O=H-G
					if O<0:break
					for B in o:F[O][B]=D
				p=[A for A in range(K,L+1)if(J,A)in E and C[J][A]==D]
				for G in range(1,Z+1):
					O=J+G
					if O>=M:break
					for B in p:F[O][B]=D
				q=[A for A in range(H,J+1)if(A,K)in E and C[A][K]==D]
				for G in range(1,a+1):
					P=K-G
					if P<0:break
					for A in q:F[A][P]=D
				r=[A for A in range(H,J+1)if(A,L)in E and C[A][L]==D]
				for G in range(1,a+1):
					P=L+G
					if P>=N:break
					for A in r:F[A][P]=D
				i,j=R-1,S+1;k,l=T-1,U+1
				for A in range(i,j+1):
					for B in range(k,l+1):
						if 0<=A<M and 0<=B<N:
							s=A in(i,j)or B in(k,l);t=R<=A<=S and T<=B<=U
							if s and not t:F[A][B]=f
				for A in range(R,S+1):
					for B in range(T,U+1):F[A][B]=D
	return tuple(tuple(A)for A in F)
def _to_list_grid(grid):
	A=grid
	if isinstance(A,tuple):return[list(A)for A in A]
	return A
def p(g):return _to_list_grid(solve_3befdf3e(g))