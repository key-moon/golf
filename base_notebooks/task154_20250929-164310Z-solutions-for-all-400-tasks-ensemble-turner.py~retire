def p(S,f=range):
 J,K=len(S),len(S[0]);C=[A[:]for A in S]
 def W():
  D=set();H=[]
  for E in f(J):
   for n in f(K):
    if C[E][n]==2and(E,n)not in D:
     G=[(E,n)];D.add((E,n));t=[]
     while G:
      L,d=G.pop();t.append((L,d))
      for(N,O)in[(1,0),(-1,0),(0,1),(0,-1)]:
       A,B=L+N,d+O
       if 0<=A<J and 0<=B<K and C[A][B]==2and(A,B)not in D:D.add((A,B));G.append((A,B))
     H.append(t)
  return H
 N=W()
 if len(N)!=2:return[A[:]for A in S]
 P=lambda c:(min(A for(A,B)in c),min(A for(B,A)in c),max(A for(A,B)in c),max(A for(B,A)in c));D,E=P(N[0]),P(N[1]);n,R=((D[0]+D[2])/2,(D[1]+D[3])/2),((E[0]+E[2])/2,(E[1]+E[3])/2)
 if abs(n[0]-R[0])>abs(n[1]-R[1]):
  X,O=(D,E)if D[0]<E[0]else(E,D);H,t=X[2]+1,O[0]-1;S,L,d=[],[],[]
  for A in f(J):
   n=[B for B in f(K)if C[A][B]==5]
   if n:
    if A<H:S.append((A,n))
    elif A>t:d.append((A,n))
    else:L.append((A,n))
  for A in f(J):
   for B in f(K):
    if C[A][B]==5:C[A][B]=0
  A=H
  for(O,n)in sorted(S,reverse=1):
   if A>t:break
   for B in n:C[A][B]=5
   A+=1
  for(n,n)in L:
   if H<=n<=t:
    for B in n:C[n][B]=5
  A=t
  for(O,n)in sorted(d):
   if A<H:break
   for B in n:C[A][B]=5
   A-=1
 else:
  Z,a=(D,E)if D[1]<E[1]else(E,D);H,t=Z[3]+1,a[1]-1;d,L,U=[],[],[]
  for B in f(K):
   G=[A for A in f(J)if C[A][B]==5]
   if G:
    if B<H:d.append((B,G))
    elif B>t:U.append((B,G))
    else:L.append((B,G))
  for A in f(J):
   for B in f(K):
    if C[A][B]==5:C[A][B]=0
  B=H
  for(O,G)in sorted(d,reverse=1):
   if B>t:break
   for A in G:C[A][B]=5
   B+=1
  for(n,G)in L:
   if H<=n<=t:
    for A in G:C[A][n]=5
  B=t
  for(O,G)in sorted(U):
   if B<H:break
   for A in G:C[A][B]=5
   B-=1
 return[A[:]for A in C]
