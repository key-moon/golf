H=range
L=len
def p(g):
 g=[[8]+n+[8]for n in g];g=[[8]*len(g[0])]+g+[[8]*len(g[0])];E,E=L(g),L(g[0]);I=[-1,0,1];I=[[n,B]for n in I for B in I]
 for n in H(1,E-1):
  for B in H(1,E-1):
   if g[n][B]==8:
    a=[g[n+I][B+a]for(I,a)in I]
    if a.count(6)+a.count(4)>3:g[n][B]=4
 for n in H(1,E-1):
  for B in H(1,E-1):
   a=[g[n+I][B+a]for(I,a)in I]
   if g[n][B]==8and a.count(6)>0:g[n][B]=3
 g=[n[1:-1]for n in g[1:-1]];return g