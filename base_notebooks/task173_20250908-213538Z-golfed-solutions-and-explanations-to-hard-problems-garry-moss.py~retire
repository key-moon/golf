# def p(g):R=range;N=R(9);H=R(len(g)-2);W=R(len(g[0])-2);[((F:=[g[x+i//3][y+i%3]for i in N])==F[::-1])*F[4]*any(F[:4])*(F[4]==g[R+1][C+1]or sum(g[R+i//3][C+i%3]==F[i]for i in N)>7)and exec('for i in N:g[R+i//3][C+i%3]=F[i]')for R in H for x in H for C in W for y in W];return g
def p(n):[((r:=[n[y+f//3][t+f%3]for f in range(9)])==r[::-1])*r[4]*any(r[:4])*(r[4]==n[l+1][d+1]or sum(n[l+f//3][d+f%3]==r[f]for f in range(9))==8)and exec('for f in range(9):n[l+f//3][d+f%3]=r[f]')for l in range(len(n)-2) for y in range(len(n)-2) for d in range(len(n[0])-2) for t in range(len(n[0])-2)];return n