from collections import Counter
def p(g):
	C=[list(A)for A in zip(*g[::-1])];I,J=len(g),len(g[0]);O,P=len(C),len(C[0]);K={(A,B)for A in range(I)for B in range(J)if g[A][B]==1};L={(A,B)for A in range(O)for B in range(P)if C[A][B]==1};A=None;D=-1;Q={(A-C,B-D)for(A,B)in K for(C,D)in L}
	for(R,S)in Q:
		B={(A+R,B+S)for(A,B)in L};E=len(K&B)
		if E>D:D,A=E,B
		elif E==D and A is not None:
			M=min(A for(B,A)in B);N=min(A for(B,A)in A)
			if M<N or M==N and min(A for(A,B)in B)>min(A for(A,B)in A):A=B
	T=Counter(B for A in g for B in A);U=T.most_common(1)[0][0];F=[A[:]for A in g]
	if A:
		for(G,H)in A:
			if 0<=G<I and 0<=H<J and F[G][H]==U:F[G][H]=2
	return F