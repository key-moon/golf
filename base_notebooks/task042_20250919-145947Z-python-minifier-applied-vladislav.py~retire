def solve_22233c11(I):
	G,H=len(I),len(I[0]);Q=[B for A in I for B in A];R=max(set(Q),key=Q.count)
	def V(i,j):
		for A in(-1,0,1):
			for B in(-1,0,1):
				if A==0 and B==0:continue
				C,D=i+A,j+B
				if 0<=C<G and 0<=D<H:yield(C,D)
	J=[[False]*H for A in range(G)];S=[]
	for A in range(G):
		for B in range(H):
			if J[A][B]or I[A][B]==R:continue
			K=I[A][B];L=[(A,B)];J[A][B]=True;C=[]
			while L:
				M,N=L.pop()
				if I[M][N]!=K:continue
				C.append((M,N))
				for(D,E)in V(M,N):
					if not J[D][E]and I[D][E]!=R and I[D][E]==K:J[D][E]=True;L.append((D,E))
			if C:S.append((K,C))
	def O(indices):A=indices;B=min(A for(A,B)in A);C=min(A for(B,A)in A);D=max(A for(A,B)in A);E=max(A for(B,A)in A);return(B,C),(D,E)
	def W(indices):A=indices;(E,B),(F,C)=O(A);D=B+C;return[(A,D-B)for(A,B)in A]
	def X(indices,factor):
		B=indices;A=factor
		if not B:return[]
		(C,D),K=O(B);F=[(A-C,B-D)for(A,B)in B];E=[]
		for(G,H)in F:
			for I in range(A):
				for J in range(A):E.append((G*A+I,H*A+J))
		return[(A+C,B+D)for(A,B)in E]
	def Y(indices):(A,B),(C,D)=O(indices);return C-A+1,D-B+1
	T=set()
	for(f,C)in S:
		if not C:continue
		F=W(C);F=X(F,2);Z,a=Y(C);b,c=-(Z//2),-(a//2);F=[(A+b,B+c)for(A,B)in F];P=set()
		for(A,B)in C:
			for d in range(30):P.add((A,d))
			for e in range(30):P.add((e,B))
		for(A,B)in F:
			if(A,B)not in P and 0<=A<G and 0<=B<H:T.add((A,B))
	U=[A[:]for A in I]
	for(A,B)in T:U[A][B]=8
	return U
def p(g):
	try:return solve_22233c11([A[:]for A in g])
	except Exception:return[list(A)for A in g]