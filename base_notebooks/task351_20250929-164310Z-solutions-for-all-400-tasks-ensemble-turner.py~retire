def p(g,r=len,s=range):
 o,i,C,D=r(g),r(g[0]),[],[]
 for A in s(o//2+1):
  for r in s(i):
   if g[A][r]==3:g[A][r]=g[-(A+1)][r];C+=[A];D+=[r]
   if g[-(A+1)][r]==3:g[-(A+1)][r]=g[A][r];C+=[o-(A+1)];D+=[r]
 for A in s(o):
  for r in s(i//2+1):
   if g[A][r]==3:g[A][r]=g[A][-(r+1)];C+=[A];D+=[r]
   if g[A][-(r+1)]==3:g[A][-(r+1)]=g[A][r];C+=[A];D+=[i-(r+1)]
 g=g[min(C):max(C)+1];g=[A[min(D):max(D)+1]for A in g];return g