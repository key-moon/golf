def f(j,A,c,E,k):
	B=j[A][c]
	if B==0:return
	if not sum(j[A][c+C]==B for C in(1,-1))==sum(j[A+C][c]==B for C in(1,-1))==1:return
	C,D,F,G=2*(j[A+1][c]==B)-1,2*(j[A][c+1]==B)-1,c,A
	if j[A+C][c+D]==B:return
	while 1<=F<k-1 and 1<=G<E-1:G-=C;F-=D;j[G][F]=j[A+2*C][c+2*D]
def p(j):
	A,B=len(j),len(j[0])
	for C in range(1,A-1):
		for D in range(1,B-1):f(j,C,D,A,B)
	return j