from collections import Counter,deque
def p(g):
	C,D=len(g),len(g[0]);H={(A,B)for A in range(min(3,C))for B in range(min(3,D))if g[A][B]!=0}
	if not H:return[A[:]for A in g]
	O=min(A for(A,B)in H);P=min(A for(B,A)in H);Q={(A-O,B-P)for(A,B)in H};N=Counter(B for A in g for B in A);R=max(N,key=N.get);L=[A[:]for A in g];I=[[0]*D for A in range(C)]
	for A in range(C):
		for B in range(D):
			if g[A][B]!=R and not I[A][B]:
				S=g[A][B];M=deque([(A,B)]);I[A][B]=1;E=[]
				while M:
					J,K=M.popleft();E.append((J,K))
					for(T,U)in((1,0),(-1,0),(0,1),(0,-1)):
						F,G=J+T,K+U
						if 0<=F<C and 0<=G<D and not I[F][G]and g[F][G]==S:I[F][G]=1;M.append((F,G))
				V=min(A for(A,B)in E);W=min(A for(B,A)in E);X={(A-V,B-W)for(A,B)in E}
				if X==Q:
					for(J,K)in E:L[J][K]=5
	for A in range(min(3,C)):
		for B in range(min(3,D)):L[A][B]=g[A][B]
	return L