r=range
s=len
def p(a):
 e=False;n=None;l,M=s(a),s(a[0]);n=[[1 if a[N][A]else 0for A in r(3)]for N in r(3)]
 for N in r(l-2):
  for A in r(M-2):
   if N<1and A<1:continue
   o=n;t=True
   for D in r(3):
    for E in r(3):
     i=a[N+D][A+E]
     if n[D][E]:
      if not i or o is not n and i!=o:t=e;break
      if o is n:o=i
     elif i:t=e;break
    if not t:break
   if not t:continue
   if any(0<=N+D+t<l and 0<=A+E+i<M and not(N<=N+D+t<N+3and A<=A+E+i<A+3)and a[N+D+t][A+E+i]==o for D in r(3)for E in r(3)if n[D][E]for(t,i)in((1,0),(-1,0),(0,1),(0,-1))):continue
   for D in r(3):
    for E in r(3):
     if n[D][E]:a[N+D][A+E]=5
   return a
 return a