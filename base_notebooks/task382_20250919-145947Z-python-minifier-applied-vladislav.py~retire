ZERO=0
TWO=2
EIGHT=8
def _ofcolor(G,c):return{(A,C)for(A,B)in enumerate(G)for(C,D)in enumerate(B)if D==c}
def _bbox_rows_cols(cells):A=cells;B=[A for(A,B)in A];C=[A for(B,A)in A];return min(B),max(B),min(C),max(C)
def _vmirror(G):return tuple(tuple(reversed(A))for A in G)
def _hmirror(G):return tuple(reversed(G))
def _dmirror(G):return tuple(tuple(A)for A in zip(*G))
def _fill(G,val,cells):
	D,E=len(G),len(G[0]);A=[list(A)for A in G]
	for(B,C)in cells:
		if 0<=B<D and 0<=C<E:A[B][C]=val
	return tuple(tuple(A)for A in A)
def solve_f15e1fac(I):
	D=tuple(tuple(A)for A in I);G=_ofcolor(D,EIGHT)
	if G:O,P,Q,R=_bbox_rows_cols(G);E=P-O+1>R-Q+1
	else:E=False
	A=_dmirror(D)if E else D;S=_ofcolor(A,TWO);T=min((A for(B,A)in S),default=0);H=T!=0;A=_vmirror(A)if H else A;U=_ofcolor(A,EIGHT);V=min((A for(A,B)in U),default=0);J=V!=0;A=_hmirror(A)if J else A;K,d=len(A),len(A[0]);L=set()
	for(C,F)in _ofcolor(A,EIGHT):
		for W in range(C,K):L.add((W,F))
	M=sorted({A for(A,B)in _ofcolor(A,TWO)});X=[0]+M;Y=[A-1 for A in M]+[K-1];Z=list(zip(X,Y));N=set()
	for(a,(b,c))in enumerate(Z):
		for(C,F)in L:
			if b<=C<=c:N.add((C,F+a))
	B=_fill(A,EIGHT,N)
	if J:B=_hmirror(B)
	if H:B=_vmirror(B)
	if E:B=_dmirror(B)
	return B
def p(g):
	try:A=tuple(tuple(A)for A in g);B=solve_f15e1fac(A);return[list(A)for A in B]
	except Exception:return[list(A)for A in g]