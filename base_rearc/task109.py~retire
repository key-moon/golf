def Z(A):
	if isinstance(A,tuple):return frozenset({B for A in A for B in A})
	return frozenset({A for(A,B)in A})
def Q(A):return tuple(map(max,zip(*Y(A))))
def GE(A):return tuple(tuple(A[::-1])for A in zip(*A[::-1]))[::-1]
def GU(A):return tuple(A for A in zip(*A[::-1]))
def GK(A,B):
	C,D=B;E,F=len(A),len(A[0])
	if not(0<=C<E and 0<=D<F):return
	return A[B[0]][B[1]]
def Y(A):
	if len(A)==0:return frozenset()
	if isinstance(next(iter(A))[1],tuple):return frozenset(A for(B,A)in A)
	return A
def U(A):return tuple(map(min,zip(*Y(A))))
def W(A):
	if isinstance(A,tuple):return tuple(zip(*A))
	B,C=U(A)
	if isinstance(next(iter(A))[1],tuple):return frozenset((A,(E-C+B,D-B+C))for(A,(D,E))in A)
	return frozenset((D-C+B,A-B+C)for(A,D)in A)
def X(A):B=tuple(A for(A,B)in enumerate(A)if len(set(B))==1);C=tuple(A for(A,B)in enumerate(W(A))if len(set(B))==1);return tuple(tuple(B for(A,B)in enumerate(D)if A not in C)for(A,D)in enumerate(A)if A not in B)
def E(A):C,D=len(A),len(A[0]);B=tuple(A for(A,B)in enumerate(A)if len(set(B))==1);E=tuple(A for(A,B)in enumerate(W(A))if len(set(B))==1);F=frozenset({frozenset({(A[B][C],(B,C))for C in range(D)})for B in B});G=frozenset({frozenset({(A[C][B],(C,B))for C in range(C)})for B in E});return F|G
def J(A):return GE(G(GU(A)))
def K(A):return GE(S(GU(A)))
def G(A):return A[len(A)//2+len(A)%2:]
def S(A):return A[:len(A)//2]
def GV(a,b):return a+b
def L(a,b):return tuple(A+B for(A,B)in zip(a,b))
def GQ(A,B,C):
	G,H=len(A),len(A[0]);D=list(list(A)for A in A)
	for(E,F)in Y(C):
		if 0<=E<G and 0<=F<H:D[E][F]=B
	return tuple(tuple(A)for A in D)
def GJ(A):
	if isinstance(A,tuple):return tuple(A[::-1]for A in A)
	B=U(A)[1]+Q(A)[1]
	if isinstance(next(iter(A))[1],tuple):return frozenset((A,(C,B-D))for(A,(C,D))in A)
	return frozenset((A,B-C)for(A,C)in A)
def GG(A):
	if isinstance(A,tuple):return A[::-1]
	B=U(A)[0]+Q(A)[0]
	if isinstance(next(iter(A))[1],tuple):return frozenset((A,(B-C,D))for(A,(C,D))in A)
	return frozenset((B-A,C)for(A,C)in A)
def GR(A):return next(iter(A))[0]
def R(A):return len(Z(A))
def GY(A,B):return frozenset((A,D)for(A,C)in enumerate(A)for(D,E)in enumerate(C)if E==B)
def M(A):return frozenset((B,C)for B in range(len(A))for C in range(len(A[0])))
def V(A):B=[B for A in A for B in A]if isinstance(A,tuple)else[A for(A,B)in A];return max(set(B),key=B.count)
def GH(a,b):return a,b
def GM(A,B):return max(A,key=B)
def GX(A):return type(A)(B for A in A for B in A)
def H(a,b):return type(a)(A for A in a if A not in b)
def P(a,b):return type(a)((*a,*b))
def p(I):I=tuple(map(tuple,I));U=E(I);W=GX(U);Y=GR(W);Z=X(I);a=V(Z);b=S(I);B=K(b);c=GJ(B);C=L(B,c);d=GG(C);e=GV(C,d);f=S(I);D=J(f);g=GJ(D);F=L(g,D);h=GG(F);i=GV(F,h);j=G(I);N=K(j);k=GJ(N);O=L(N,k);l=GG(O);m=GV(l,O);n=G(I);Q=J(n);o=GJ(Q);T=L(o,Q);p=GG(T);q=GV(p,T);r=GH(e,i);s=GH(m,q);t=P(r,s);A=GM(t,R);u=M(A);v=GY(A,a);w=H(u,v);x=GQ(A,Y,w);return[*map(list,x)]