def p(A):B,C=len(A),len(A[0]);D=sorted({0,C}|{C+1 for C in range(C-1)if any(A[B][C]!=A[B][C+1]for B in range(B))});E=sorted({0,B}|{B+1 for B in range(B-1)if any(A[B][C]!=A[B+1][C]for C in range(C))});F=[[A[(E[B]+E[B+1]-1)//2][(D[C]+D[C+1]-1)//2]for C in range(len(D)-1)]for B in range(len(E)-1)];F=[A for A in F if any(A)];G=zip(*F);G=[A for A in G if any(A)];return list(map(list,zip(*G)))