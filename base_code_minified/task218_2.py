def p(g):A,B=len(g),len(g[0]);C=sorted({0,B}|{B+1 for B in range(B-1)if any(g[A][B]!=g[A][B+1]for A in range(A))});D=sorted({0,A}|{A+1 for A in range(A-1)if any(g[A][B]!=g[A+1][B]for B in range(B))});E=[[g[(D[A]+D[A+1]-1)//2][(C[B]+C[B+1]-1)//2]for B in range(len(C)-1)]for A in range(len(D)-1)];E=[A for A in E if any(A)];F=zip(*E);F=[A for A in F if any(A)];return list(map(list,zip(*F)))